{% extends 'layout.html' %}

{% block title %}
    Home Page
{% endblock %}

{% block body %}

<style>
    .gradient-custom {
/* fallback for old browsers */
background: #f093fb;

/* Chrome 10-25, Safari 5.1-6 */
background: -webkit-linear-gradient(to bottom right, rgba(240, 147, 251, 1), rgba(245, 87, 108, 1));

/* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
background: linear-gradient(to bottom right, rgba(240, 147, 251, 1), rgba(245, 87, 108, 1))
}

.card-registration .select-input.form-control[readonly]:not([disabled]) {
font-size: 1rem;
line-height: 2.15;
padding-left: .75em;
padding-right: .75em;
}
.card-registration .select-arrow {
top: 13px;
}
</style>

<style>
    /* Add a black background color to the top navigation bar */
.topnav {
  overflow: hidden;
  background-color: #e9e9e9;
}

/* Style the links inside the navigation bar */
.topnav a {
  float: left;
  display: block;
  color: black;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 17px;
}

/* Change the color of links on hover */
.topnav a:hover {
  background-color: #ddd;
  color: black;
}

/* Style the "active" element to highlight the current page */
.topnav a.active {
  background-color: #2196F3;
  color: white;
}

/* Style the search box inside the navigation bar */
.topnav input[type=text] {
  float: right;
  padding: 6px;
  border: none;
  margin-top: 8px;
  margin-right: 16px;
  font-size: 17px;
}

/* When the screen is less than 600px wide, stack the links and the search field vertically instead of horizontally */
@media screen and (max-width: 600px) {
  .topnav a, .topnav input[type=text] {
    float: none;
    display: block;
    text-align: left;
    width: 100%;
    margin: 0;
    padding: 14px;
  }
  .topnav input[type=text] {
    border: 1px solid #ccc;
  }
}

</style>

<div style="margin-left: 2%;margin-right: 2%;">
    <div class="topnav">
        <form action="" method="post">
            <input type="text" style="display: none" name="logout_page" id="" placeholder="">
            <label class="h3" style="margin-top: 18px;margin-left: 2px;" for="">Welcome! {{data["user"].name}}</label>
            <input type="submit" class="btn btn-danger" style="float: right;" value="Log Out">
        </form>
    
  </div>
    
  
  
  <section class="gradient-custom" style="height: fit-content;">
    <div class="container py-5 h-100" style="height: fit-content;">
      <div class="row justify-content-center align-items-center h-100" style="height: fit-content;">
        <div class="col-12 col-lg-9 col-xl-7" style="height: fit-content;">
          <div class="card shadow-2-strong card-registration" style="border-radius: 15px;" style="height: fit-content;">
            <div class="card-body p-4 p-md-5" style="height: fit-content;">
              <h3 class="mb-4 pb-2 pb-md-0 mb-md-5">Macquarie Fileds</h3>
              <form action="" method="post">

                <div>
                    <label for="" style="color: red;">{{data["message"]}}</label>
                </div>

                <input type="text" style="display: none" name="management_page" id="" placeholder="" >
                <input type="text"  readonly name="Id" class=" "  id="Id" placeholder="Id" value="">
                <label for="">.</label>

                <div class="row">
                  <div class="col-md-6 mb-4">
                    <div class="form-outline">
                      <input type="text" name="Registration" id="Registration" class="form-control form-control-lg" list="Registration_list" placeholder="Registration" value="{{data['form_data']['registration']}}">
                      <i class="fas fa-car"></i>
                      <label class="form-label" for="firstName">Registration</label>
                    </div>
                  </div>
                  <div class="col-md-6 mb-4">
                    <div class="form-outline">
                        <button type="submit" name="Find" id="Find" class="form-control btn-lg btn-outline-primary" value="Find"><i class="fa fa-search"></i>&nbsp;&nbsp;&nbsp;&nbsp;Find</button>
                    </div>
                  </div>
                </div>
  
                <div class="row">
                    <div class="col-md-6 mb-4">
                      <div class="form-outline">
                        <input type="text" name="Vehicle_Type" id="Vehicle_Type" class="form-control form-control-lg" list="Vehicle_Type_list" placeholder="Vehicle Type" value="{{data['form_data']['vehicle']}}">
                        <i class="far fa-edit"></i>
                        <label class="form-label" for="firstName">Vehicle Type</label>
                      </div>
                    </div>
                    <div class="col-md-6 mb-4">
                        <div class="form-outline">
                            <input type="text" name="Visitor_Type" id="Visitor_Type" class="form-control form-control-lg" list="Visitor_Type_list" placeholder="Visitor Type" value="{{data['form_data']['visitor']}}">
                            <i class="far fa-edit"></i>
                            <label class="form-label" for="firstName">Visitor Type</label>
                        </div>
                      </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-4">
    
                      <div class="form-outline">
                        <input type="text" name="Destination" id="Destination" class="form-control form-control-lg"  list="Destination_list" placeholder="Destination" value="{{data['form_data']['destination']}}">
                        <i class="fas fa-location-arrow"></i>
                        <label class="form-label" for="firstName">Destination</label>
                      </div>
    
                    </div>
                </div>
  
                <center>
                    <div>
                        <input type="submit" style="width: 28%;" class="btn btn-primary" value="Save" name="Save">
                        <input type="submit" style="width: 28%;" class="btn btn-danger" value="Delete" name="Delete">
                        <input type="submit" style="width: 28%;" class="btn btn-warning" value="Clear" name="Clear">
                    </div>
                </center>
        
                <datalist id="Registration_list">
                    {% for dt in data["data"] %}
                        <option>{{dt.Registration}}</option>
                    {% endfor %}
                </datalist>
                
                <datalist id="Vehicle_Type_list">
                    {% for dt in data["data"] %}
                        <option>{{dt.Vehicle_Type}}</option>
                    {% endfor %}
                </datalist>
        
                <datalist id="Visitor_Type_list">
                    {% for dt in data["data"] %}
                        <option>{{dt.Visitor_Type}}</option>
                    {% endfor %}
                </datalist>
        
                <datalist id="Destination_list">
                    {% for dt in data["data"] %}
                        <option>{{dt.Destination}}</option>
                    {% endfor %}
                </datalist>
                
              </form>
            </div>
          </div>
        </div>
      </div>

      
    </div>
  </section>
    
 <section>
    <form action="" method="post">
        <input type="text" style="display: none" name="logout_refresh_page" id="" placeholder="" >
        <input type="text" name="search" id="" placeholder="Search . . ." value='{{data["search"]}}'>
        <input type="submit" value="Search">
    </form>

    <div class="table-responsive">
        <table class="table" style="width: 100%;min-width: fit-content;">
            <tr>
                <th class="th">Id</th>
                <th class="th">Date</th>
                <th class="th">Time</th>
                <th class="th">Registration</th>
                <th class="th">Vehicle Type</th>
                <th class="th">Visitor Type</th>
                <th class="th">Destination</th>
                <th class="th">Add TimeStamp</th>
                <th class="th">Update TimeStamp</th>
                <th class="th">Updater Name</th>
            </tr>
            {% for dt in data["data"] %}
                <tr onclick='id_click("{{dt}}")'>
                    <td class="td">
                        {{dt.Id}}
                    </td>
                    <td class="td">
                        {{dt.Date}}
                    </td>
                    <td class="td">
                        {{dt.Time}}
                    </td>
                    <td class="td">
                        {{dt.Registration}}
                    </td>
                    <td class="td">
                        {{dt.Vehicle_Type}}
                    </td>
                    <td class="td">
                        {{dt.Visitor_Type}}
                    </td>
                    <td class="td">
                        {{dt.Destination}}
                    </td>
                    <td class="td">
                        {{dt.Add_TimeStamp}}
                    </td>
                    <td class="td">
                        {{dt.Update_TimeStamp}}
                    </td>
                    <td class="td">
                        {{dt.Updater_Name}}
                    </td>
                </tr>
            {% endfor %}
            
        </table>
    </div>

 </section>
    

</div>



<script>
    function id_click(data)
    {
        let evalData = eval("["+(data)+"]")[0];
        document.getElementById("Id").value=evalData["Id"];
        document.getElementById("Registration").value=evalData["Registration"];
        document.getElementById("Vehicle_Type").value=evalData["Vehicle_Type"];
        document.getElementById("Visitor_Type").value=evalData["Visitor_Type"];
        document.getElementById("Destination").value=evalData["Destination"];
    }
</script>


<script>



    function Insert_data()
    {
        var d = Date.now();
        localStorage.setItem("run_time_admin",d);
        var _name = document.getElementById("_name").value.replace(' ','+');
        var _user_name = document.getElementById("_user_name").value.replace(' ','+');
        var _user_password = document.getElementById("_user_password").value.replace(' ','+');

        fetch('/user/insert/api?name='+_name+'&user_name='+_user_name+'&user_password='+_user_password)
        .then(response => response.json())
        .then(data =>{
            if(data.Response === 'Done')
            {
                alert("Data Inserted Successfully");
                location.reload();
            }
            else
            {
                alert(data.Response);
            }
        });
    }

    function Update_data()
    {
        var d = Date.now();
        localStorage.setItem("run_time_admin",d);
        let _id = document.getElementById("_id").value;
        var _name = document.getElementById("_name").value.replace(' ','+');
        var _user_name = document.getElementById("_user_name").value.replace(' ','+');
        var _user_password = document.getElementById("_user_password").value.replace(' ','+');

        fetch('/user/update/api?id='+_id+'&name='+_name+'&user_name='+_user_name+'&user_password='+_user_password)
        .then(response => response.json())
        .then(data =>{
            if(data.Response === 'Done')
            {
                alert("Data Updated Successfully");
                location.reload();
            }
            else
            {
                alert(data.Response);
            }
        });
    }

    function Delete_data()
    {
        var d = Date.now();
        localStorage.setItem("run_time_admin",d);
        let _id = document.getElementById("_id").value;
        try
        {
            fetch('/user/delete/api?id='+_id)
        .then(response => response.json())
        .then(data =>{
            if(data.Response === 'Done')
            {
                alert("Data Deleted Successfully");
                location.reload();
            }
            else
            {
                alert(data.Response);
            }
        });
        }
        catch(e)
        {
            alert(e)
        }
    }

    function Clear_data()
    {
        var d = Date.now();
        localStorage.setItem("run_time_admin",d);
        document.getElementById("_id").value="";
        document.getElementById("_name").value="";
        document.getElementById("_user_name").value="";
        document.getElementById("_user_password").value="";
    }

</script>





{% endblock %}